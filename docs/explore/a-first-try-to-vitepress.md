# VitePress的初次尝试

今天看到Vite发布了3.0版本。而它的的Realse notes里面提到，
现在它的文档全部由VitePress构建。

我之前一直没有写过博客，但是我也确实常常有写一点什么东西记录自己想法的时候，
就算没什么人看。此前我有简单地尝试过Hexo，Heroku这些东西，
但是一来对他们的技术栈没什么兴趣，二来看了别人用它们做出的网站，
都没能达到我想要的效果，所以就没深入了解。

不过VitePress马上吸引了我的注意力。简单尝试了一下，我发现它确实挺适合我。
我马上就用它搭好了博客，于是这篇文章也放在它搭建的这个博客之上。

## VitePress吸引我的几个地方

### Vue生态

它属于Vue的生态自然是最初吸引住我眼球的一点。
首先虽然我也并不对Vue有多熟悉，但相对而言它还是我比较擅长的技术，
也是我比较感兴趣的前端框架。前面有提到我也尝试过用Hexo，Heroku做博客，
其实放弃它们后我也曾想直接用Vue直接搭建博客，但是实践起来不太现实，
如果当真不依靠在别人的框架之上，我就得自己实现一个个功能，
不然就是每次都像前端开发那样每次写一个新文章就是一个新页面。
VitePress给了我第三个选择，在Vue之上给了我搭建静态站点的框架。

VitePress使用Vite，也使用Vue3搭建，默认主题开箱即用。
它提供了在它里面使用Vue的方法，这对于熟悉Vue的人来说肯定是极大优势。

### 符合习惯

虽然在Typora这个知名的编辑器离开Beta阶段正式收费后，
我是第一时间就买了它的正版的。
但是对于我这样一个真正的重度Vim用户来说，
最偏好的永远是用Vim来写MarkDown，尤其是英文文档。
目前Typora基本上只被我用来预览我本地机器上的.md文档，
很少直接用它来写。

由于Vim是跑在TUI下面的，
所以一般而言Vim的MarkDown预览都是插件通过打开一个本地的服务器，
在浏览器里面进行的。我使用的时候一般也是这样一个Vim的窗口写，
一个浏览器的预览效果的使用场景。

VitePress结合了MarkDown，也结合了Vite。就像我写前端项目时能实时预览页面一样，
VitePress可以让我实时预览MarkDown。
所以这样一边用Vim写博客内容，一边用浏览器看效果的使用方式，
不仅符合多数人写代码的习惯，也符合我写MarkDown文档的习惯。非常适合我。

### 编译快速

Vite刚推出时主打的就是快，就是开发时候的体验。
之前有看见有很多人评论，Vite不过是解决了一个不痛不痒的问题。
乍一看很有道理，毕竟确实不过是编译的速度而已。
大型的项目例如Chromium动辄编译两三小时，也没有影响Chromium的流行。
但是实际上对于前端开发来说编译速度的提升对于开发的体验非常大。

相比与后端开发来说，前端开发因为侧重于实际的显示效果，
所以需要更频繁的编译，每次更改代码以后都重新编译并更新（也就是实时预览）是基本操作，
不像后端只需要在测试和调试的时候进行编译。
所以编译速度的增加对于后端开发来说可能是喜闻乐见的喝茶时间，
但对于前端来说确实痛苦的等待过程，尽管很短暂，却足以打破开发的连贯性。

我参与的学校的一个Webpack 3的项目，是一个上万行代码的Vue 2.0屎山，
这个项目的依赖可能从项目创建以后就再也没有升级过，使用的Nuxt的版本居然停留在1.0.0，
而我写下这篇文章的时候，Webpack版本号已经迭代到5，而Nuxt 3.0的RC已经迭代四个版本了。
这个有大量历史包袱的项目实时预览的编译速度只能说是一言难尽，
每次改好代码等预览效果出来的间隙能够我念两句诗了。
每次写了代码等几秒钟延迟才能看效果，开发体验非常糟糕。

的确，我想项目经理不会太关心Vite它究竟编译得快不快，
主要关心它能不能完成任务，稳不稳定，编译产物的大小这些。
但是每个开发者对于这个编译速度的差距，这点开发体验的提升，应该都是有直接感受的。
至少，我觉得基本上是由开发者组成的的开源社区应该会比较推崇Vite。

尤雨溪去年在知乎上面预言，Vite可以吃下一块稳定的份额。这个预言确实成为了事实。
除了前两周在知乎看见他提到的，已经将官方构建工具换为了Vite的Svelte以外，
TypeORM也默认使用Vite了。我最近就是用TypeORM，
昨天我在它的cli新建的项目的package.json里面看到了Vite。
这还是令我挺惊讶的。

## 与VuePress的比较

其它不谈，就VuePress用的是Vue 2和Webpack而言，
注定了我这样偏好新东西的人是不会选择它的。况且VuePress目前已经处于维护状态了。

不过，VuePress一样还有一个升级版，VuePress-next。
我一开始的时候就困惑既然VuePress处于维护状态了，
为什么VitePress这样一个在GitHub上面属于Vuejs而不是Vitejs组织的项目，
为什么不沿用VuePress的名字作为一个全新的重构版本呢，原来VuePress自己也有升级。

尤雨溪在Github上说它给VitePress一个不同名字的目的是尝试一个完全不同的结构，
而不必考虑向后兼容。根据VitePress的描述，
VitePress会“more opinionated and less configurable”，
也就是灵活度不如VuePress，而且虽然支持切换主题，未来却未必支持插件。

另外，尽管有VuePress-next，
但VuePress的README中说明项目处于维护状态的地方却并没有提及这下一个大版本，
还建议使用VitePress而没有推荐使用VuePress-next来替代。
另外它的Contributors里面没有尤雨溪，
所以我对VuePress-next的受支持程度持一定的怀疑态度。
并且尤雨溪说未来他可能让稳定以后的VitePress成为VuePress 3，
基本上算是给VuePress盖上了棺材板。

考虑到我以不需要对VuePress的向后兼容，且目前VitePress的效果足够好，
看不出要多么高度的定制，所以我选择了VitePress。

## 最后

选用社区驱动开源项目往往有对它会不会持续更新有更多的担忧，
毕竟谁也不想轻易更换底层框架。
当前，VitePress的最新版本是1.0.0-alpha.4，可见还出于非常早期的阶段。
但是我想，既然Vite的文档已经替换成了VitePress构建，
既然VitePress已经在GitHub上面收获了5k stars，拿它的生命周期应该还会比较长，
长时间内应该也还处于成长期。另外实际上我也偏好更新的东西，哪怕它不稳定，
所以我最终选择了VitePress。

刚刚把博客的代码和环境非常基础的部分弄好了，一时之间有很多感想，
趁着灵感上来了，文档没读多少，其它配置后面再弄，迫不及待就先写下了这第一篇。

